{"ast":null,"code":"import api from './api';\n\n// Get the logged-in user's profile\nexport const getMyProfile = async () => {\n  try {\n    const {\n      data\n    } = await api.get('/auth/me');\n    return data;\n  } catch (error) {\n    throw error.response.data.msg || 'Failed to fetch profile';\n  }\n};\n\n// Update the logged-in user's profile\nexport const updateMyProfile = async profileData => {\n  try {\n    const {\n      data\n    } = await api.put('/users/profile', profileData);\n    return data;\n  } catch (error) {\n    throw error.response.data.msg || 'Failed to update profile';\n  }\n};\n\n// --- NEW FUNCTION ---\nexport const changePassword = async passwordData => {\n  try {\n    const {\n      data\n    } = await api.put('/users/change-password', passwordData);\n    return data; // Will return { msg: 'Password updated successfully' }\n  } catch (error) {\n    // Throw the specific error message from the backend\n    throw new Error(error.response.data.msg || 'Password change failed');\n  }\n};\n// --- END NEW FUNCTION ---\n\n// Get user's saved schemes\nexport const getSavedSchemes = async () => {\n  try {\n    const {\n      data\n    } = await api.get('/users/saved-schemes');\n    return data;\n  } catch (error) {\n    throw error.response.data.msg || 'Failed to fetch saved schemes';\n  }\n};\n\n// Save a scheme\nexport const saveScheme = async schemeId => {\n  try {\n    const {\n      data\n    } = await api.post('/users/save-scheme', {\n      schemeId\n    });\n    return data;\n  } catch (error) {\n    throw error.response.data.msg || 'Failed to save scheme';\n  }\n};\n\n// Remove a saved scheme\nexport const removeSavedScheme = async savedSchemeId => {\n  try {\n    const {\n      data\n    } = await api.delete(`/users/saved-schemes/${savedSchemeId}`);\n    return data;\n  } catch (error) {\n    throw error.response.data.msg || 'Failed to remove scheme';\n  }\n};","map":{"version":3,"names":["api","getMyProfile","data","get","error","response","msg","updateMyProfile","profileData","put","changePassword","passwordData","Error","getSavedSchemes","saveScheme","schemeId","post","removeSavedScheme","savedSchemeId","delete"],"sources":["D:/rosun/REP/myscheme-project/frontend/src/services/user.js"],"sourcesContent":["import api from './api';\r\n\r\n// Get the logged-in user's profile\r\nexport const getMyProfile = async () => {\r\n  try {\r\n    const { data } = await api.get('/auth/me');\r\n    return data;\r\n  } catch (error) {\r\n    throw error.response.data.msg || 'Failed to fetch profile';\r\n  }\r\n};\r\n\r\n// Update the logged-in user's profile\r\nexport const updateMyProfile = async (profileData) => {\r\n  try {\r\n    const { data } = await api.put('/users/profile', profileData);\r\n    return data;\r\n  } catch (error) {\r\n    throw error.response.data.msg || 'Failed to update profile';\r\n  }\r\n};\r\n\r\n// --- NEW FUNCTION ---\r\nexport const changePassword = async (passwordData) => {\r\n  try {\r\n    const { data } = await api.put('/users/change-password', passwordData);\r\n    return data; // Will return { msg: 'Password updated successfully' }\r\n  } catch (error) {\r\n    // Throw the specific error message from the backend\r\n    throw new Error(error.response.data.msg || 'Password change failed');\r\n  }\r\n};\r\n// --- END NEW FUNCTION ---\r\n\r\n// Get user's saved schemes\r\nexport const getSavedSchemes = async () => {\r\n  try {\r\n    const { data } = await api.get('/users/saved-schemes');\r\n    return data;\r\n  } catch (error) {\r\n    throw error.response.data.msg || 'Failed to fetch saved schemes';\r\n  }\r\n};\r\n\r\n// Save a scheme\r\nexport const saveScheme = async (schemeId) => {\r\n  try {\r\n    const { data } = await api.post('/users/save-scheme', { schemeId });\r\n    return data;\r\n  } catch (error) {\r\n    throw error.response.data.msg || 'Failed to save scheme';\r\n  }\r\n};\r\n\r\n// Remove a saved scheme\r\nexport const removeSavedScheme = async (savedSchemeId) => {\r\n  try {\r\n    const { data } = await api.delete(`/users/saved-schemes/${savedSchemeId}`);\r\n    return data;\r\n  } catch (error) {\r\n    throw error.response.data.msg || 'Failed to remove scheme';\r\n  }\r\n};"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;;AAEvB;AACA,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;EACtC,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMF,GAAG,CAACG,GAAG,CAAC,UAAU,CAAC;IAC1C,OAAOD,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,MAAMA,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,GAAG,IAAI,yBAAyB;EAC5D;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,eAAe,GAAG,MAAOC,WAAW,IAAK;EACpD,IAAI;IACF,MAAM;MAAEN;IAAK,CAAC,GAAG,MAAMF,GAAG,CAACS,GAAG,CAAC,gBAAgB,EAAED,WAAW,CAAC;IAC7D,OAAON,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,MAAMA,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,GAAG,IAAI,0BAA0B;EAC7D;AACF,CAAC;;AAED;AACA,OAAO,MAAMI,cAAc,GAAG,MAAOC,YAAY,IAAK;EACpD,IAAI;IACF,MAAM;MAAET;IAAK,CAAC,GAAG,MAAMF,GAAG,CAACS,GAAG,CAAC,wBAAwB,EAAEE,YAAY,CAAC;IACtE,OAAOT,IAAI,CAAC,CAAC;EACf,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd;IACA,MAAM,IAAIQ,KAAK,CAACR,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,GAAG,IAAI,wBAAwB,CAAC;EACtE;AACF,CAAC;AACD;;AAEA;AACA,OAAO,MAAMO,eAAe,GAAG,MAAAA,CAAA,KAAY;EACzC,IAAI;IACF,MAAM;MAAEX;IAAK,CAAC,GAAG,MAAMF,GAAG,CAACG,GAAG,CAAC,sBAAsB,CAAC;IACtD,OAAOD,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,MAAMA,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,GAAG,IAAI,+BAA+B;EAClE;AACF,CAAC;;AAED;AACA,OAAO,MAAMQ,UAAU,GAAG,MAAOC,QAAQ,IAAK;EAC5C,IAAI;IACF,MAAM;MAAEb;IAAK,CAAC,GAAG,MAAMF,GAAG,CAACgB,IAAI,CAAC,oBAAoB,EAAE;MAAED;IAAS,CAAC,CAAC;IACnE,OAAOb,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,MAAMA,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,GAAG,IAAI,uBAAuB;EAC1D;AACF,CAAC;;AAED;AACA,OAAO,MAAMW,iBAAiB,GAAG,MAAOC,aAAa,IAAK;EACxD,IAAI;IACF,MAAM;MAAEhB;IAAK,CAAC,GAAG,MAAMF,GAAG,CAACmB,MAAM,CAAC,wBAAwBD,aAAa,EAAE,CAAC;IAC1E,OAAOhB,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,MAAMA,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,GAAG,IAAI,yBAAyB;EAC5D;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}