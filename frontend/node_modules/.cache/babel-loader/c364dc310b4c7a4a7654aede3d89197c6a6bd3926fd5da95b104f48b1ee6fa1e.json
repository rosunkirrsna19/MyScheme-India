{"ast":null,"code":"var _jsxFileName = \"D:\\\\rosun\\\\REP\\\\myscheme-project\\\\frontend\\\\src\\\\components\\\\common\\\\Navbar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom'; // <-- THIS LINE IS FIXED (was 'in')\nimport * as notificationService from '../../services/notifications';\nimport AuthContext from '../../context/AuthContext';\nimport './NotificationBell.css';\n\n// Simple Bell Icon\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BellIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 3\n}, this);\n_c = BellIcon;\nconst NotificationBell = () => {\n  _s();\n  const [notifications, setNotifications] = useState([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const {\n    user\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (user) {\n      fetchNotifications();\n    }\n  }, [user]);\n  const fetchNotifications = async () => {\n    try {\n      const data = await notificationService.getMyNotifications();\n      setNotifications(data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const unreadCount = notifications.filter(n => !n.read).length;\n  const handleToggle = () => {\n    setIsOpen(!isOpen);\n    // If opening, refetch notifications\n    if (!isOpen) {\n      fetchNotifications();\n    }\n  };\n  const handleNotificationClick = async notification => {\n    setIsOpen(false);\n    navigate(notification.link); // Go to the link (e.g., /my-applications)\n\n    // Mark as read in the backend\n    try {\n      await notificationService.markAsRead(notification._id);\n      // Update state locally\n      setNotifications(prev => prev.map(n => n._id === notification._id ? {\n        ...n,\n        read: true\n      } : n));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  if (!user) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"notification-bell\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleToggle,\n      className: \"bell-button\",\n      children: [/*#__PURE__*/_jsxDEV(BellIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"unread-badge\",\n        children: unreadCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification-dropdown\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notification-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Notifications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"notification-list\",\n        children: notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"notification-item-empty\",\n          children: \"You have no notifications.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this) : notifications.map(notification => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `notification-item ${notification.read ? 'read' : 'unread'}`,\n          onClick: () => handleNotificationClick(notification),\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: notification.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"notification-time\",\n            children: new Date(notification.createdAt).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 19\n          }, this)]\n        }, notification._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(NotificationBell, \"8cua9Ocx1151EE1vhKKhUv9Iro8=\", false, function () {\n  return [useNavigate];\n});\n_c2 = NotificationBell;\nexport default NotificationBell;\nvar _c, _c2;\n$RefreshReg$(_c, \"BellIcon\");\n$RefreshReg$(_c2, \"NotificationBell\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","notificationService","AuthContext","jsxDEV","_jsxDEV","BellIcon","width","height","viewBox","fill","xmlns","children","d","fileName","_jsxFileName","lineNumber","columnNumber","_c","NotificationBell","_s","notifications","setNotifications","isOpen","setIsOpen","user","navigate","fetchNotifications","data","getMyNotifications","error","console","unreadCount","filter","n","read","length","handleToggle","handleNotificationClick","notification","link","markAsRead","_id","prev","map","className","onClick","message","Date","createdAt","toLocaleDateString","_c2","$RefreshReg$"],"sources":["D:/rosun/REP/myscheme-project/frontend/src/components/common/Navbar.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom'; // <-- THIS LINE IS FIXED (was 'in')\r\nimport * as notificationService from '../../services/notifications';\r\nimport AuthContext from '../../context/AuthContext';\r\nimport './NotificationBell.css'; \r\n\r\n// Simple Bell Icon\r\nconst BellIcon = () => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z\" />\r\n  </svg>\r\n);\r\n\r\nconst NotificationBell = () => {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchNotifications();\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchNotifications = async () => {\r\n    try {\r\n      const data = await notificationService.getMyNotifications();\r\n      setNotifications(data);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n  const handleToggle = () => {\r\n    setIsOpen(!isOpen);\r\n    // If opening, refetch notifications\r\n    if (!isOpen) {\r\n      fetchNotifications();\r\n    }\r\n  };\r\n\r\n  const handleNotificationClick = async (notification) => {\r\n    setIsOpen(false);\r\n    navigate(notification.link); // Go to the link (e.g., /my-applications)\r\n    \r\n    // Mark as read in the backend\r\n    try {\r\n      await notificationService.markAsRead(notification._id);\r\n      // Update state locally\r\n      setNotifications(prev =>\r\n        prev.map(n => (n._id === notification._id ? { ...n, read: true } : n))\r\n      );\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"notification-bell\">\r\n      <button onClick={handleToggle} className=\"bell-button\">\r\n        <BellIcon />\r\n        {unreadCount > 0 && <span className=\"unread-badge\">{unreadCount}</span>}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"notification-dropdown\">\r\n          <div className=\"notification-header\">\r\n            <h3>Notifications</h3>\r\n          </div>\r\n          <ul className=\"notification-list\">\r\n            {notifications.length === 0 ? (\r\n              <li className=\"notification-item-empty\">You have no notifications.</li>\r\n            ) : (\r\n              notifications.map(notification => (\r\n                <li\r\n                  key={notification._id}\r\n                  className={`notification-item ${notification.read ? 'read' : 'unread'}`}\r\n                  onClick={() => handleNotificationClick(notification)}\r\n                >\r\n                  <p>{notification.message}</p>\r\n                  <span className=\"notification-time\">\r\n                    {new Date(notification.createdAt).toLocaleDateString()}\r\n                  </span>\r\n                </li>\r\n              ))\r\n            )}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationBell;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}